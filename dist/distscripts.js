let pokemonRepository=function(){let e=[],t=document.querySelector("#modal-container");return{getAll:function(){return e},add:function(t){"object"==typeof t&&"name"in t?e.push(t):console.log("pokemon is not correct")},addListItem:function(e){let t=document.querySelector(".pokemon-list"),s=document.createElement("div"),a=document.createElement("button");a.innerText=e.name,a.classList.add("button"),a.addEventListener("click",()=>{pokemonRepository.showDetails(e)}),s.classList.add("grid-item"),s.appendChild(a),t.appendChild(s),pokemonRepository.loadDetails(e).then(function(){"water"===e.types[0].type.name&&a.classList.add("water"),"grass"===e.types[0].type.name&&a.classList.add("grass"),"fire"===e.types[0].type.name&&a.classList.add("fire"),"bug"===e.types[0].type.name&&a.classList.add("bug"),"dark"===e.types[0].type.name&&a.classList.add("dark"),"dragon"===e.types[0].type.name&&a.classList.add("dragon"),"electric"===e.types[0].type.name&&a.classList.add("electric"),"fairy"===e.types[0].type.name&&a.classList.add("fairy"),"fighting"===e.types[0].type.name&&a.classList.add("fighting"),"flying"===e.types[0].type.name&&a.classList.add("flying"),"ghost"===e.types[0].type.name&&a.classList.add("ghost"),"ground"===e.types[0].type.name&&a.classList.add("ground"),"ice"===e.types[0].type.name&&a.classList.add("ice"),"normal"===e.types[0].type.name&&a.classList.add("normal"),"poison"===e.types[0].type.name&&a.classList.add("poison"),"psychic"===e.types[0].type.name&&a.classList.add("psychic"),"rock"===e.types[0].type.name&&a.classList.add("rock"),"steel"===e.types[0].type.name&&a.classList.add("steel"),"poison"===e.types[1].type.name?a.classList.add("poison2"):"water"===e.types[1].type.name?a.classList.add("water2"):"grass"===e.types[1].type.name?a.classList.add("grass2"):"fire"===e.types[1].type.name?a.classList.add("fire2"):"bug"===e.types[1].type.name?a.classList.add("bug2"):"dark"===e.types[1].type.name?a.classList.add("dark2"):"dragon"===e.types[1].type.name?a.classList.add("dragon2"):"electric"===e.types[1].type.name?a.classList.add("electric2"):"fairy"===e.types[1].type.name?a.classList.add("fairy2"):"fighting"===e.types[1].type.name?a.classList.add("fighting2"):"ghost"===e.types[1].type.name?a.classList.add("ghost2"):"ground"===e.types[1].type.name?a.classList.add("ground2"):"ice"===e.types[1].type.name?a.classList.add("ice2"):"normal"===e.types[1].type.name?a.classList.add("normal2"):"psychic"===e.types[1].type.name?a.classList.add("psychic2"):"rock"===e.types[1].type.name?a.classList.add("rock2"):"steel"===e.types[1].type.name?a.classList.add("steel2"):"flying"===e.types[1].type.name&&a.classList.add("flying2")})},showDetails:function(e){pokemonRepository.loadDetails(e).then(function(){let s=e.types;t.innerText="";let a=document.createElement("div");a.classList.add("modal");let n=document.createElement("h1");n.innerText=e.name,n.classList.add("header");let i=document.createElement("p");i.innerText=`Height: ${e.height}`,i.classList.add("height");let d=document.createElement("img");d.src=e.imageUrl,d.classList.add("image");let o=document.createElement("p");o.innerText=e.types[0].type.name,o.classList.add("type1");let p=document.createElement("p");2===s.length&&(p.innerText=e.types[1].type.name,p.classList.add("type2"));let l=document.createElement("div");l.classList.add("types"),l.appendChild(o),l.appendChild(p);let c=document.createElement("button");c.classList.add("modal-close"),c.innerText="Close",c.addEventListener("click",pokemonRepository.hideDetails),a.appendChild(n),a.appendChild(d),a.appendChild(i),a.appendChild(l),a.appendChild(c),t.appendChild(a),t.classList.add("is-visible"),t.addEventListener("click",e=>{e.target===t&&pokemonRepository.hideDetails()}),window.addEventListener("keydown",e=>{"Escape"===e.key&&t.classList.contains("is-visible")&&pokemonRepository.hideDetails()})})},hideDetails:function(){t.classList.remove("is-visible")},loadList:function(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){let t={name:e.name,detailsUrl:e.url};pokemonRepository.add(t)})}).catch(function(e){console.error(e)})},loadDetails:function(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types}).catch(function(e){console.error(e)})}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})}),document.querySelector("#search-bar").addEventListener("input",function(){let e=this.value.toLowerCase(),t=pokemonRepository.getAll().filter(function(t){return t.name.toLowerCase().includes(e)});document.querySelector(".pokemon-list").innerHTML="",t.forEach(function(e){pokemonRepository.addListItem(e)})});